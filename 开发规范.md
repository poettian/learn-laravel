# 合众技术后端开发规范

### 目录结构

#### 控制器

这个应该按照应用来分，像Admin、Pc、Mobile、Api 都是独立的应用，所以 Controllers 目录下每一个应用都应该有一个对应的目录。在各自的应用里，可以包含像 Auth、Order、User等控制器，比如：` App\Http\Controllers\Api\UserController`。

**注意：控制器中不要写业务逻辑的代码，控制器需要做的就是校验参数、调用service完成业务、封装返回数据这些。**

#### 模型

这个没啥好说的，统一路径为`App\Models\**`，比如：`App\Models\User`。

```php
//一些枚举型的字段通常会用tinyint来定义，在程序中引用这些字段数值时，应该用常量来标识，比如
if ($data['type'] != \App\Models\User::ENUM_IS_DISABLED) {
    $data['status_text'] = \App\Models\User::$enum_data_map[\App\Models\User::ENUM_IS_DISABLED];
}

LABLE_IS_DISABLED = '已禁用';

// enum类型值映射
$enum_data_map = [
    self::ENUM_IS_DISABLED => self::LABLE_IS_DISABLED,
];
```



#### 业务逻辑

**建议放在 App\Services 目录下。service主要负责业务逻辑，包括数据的读取更新（DB层，Cache层，DB Queue层，MQueue层）、根据业务规则组合或筛选过滤数据，将处理后的数据返回给调用方**。

可以考虑分开处理管理后台（Admin）和前端应用（Front）的逻辑，除非特别大的项目，否则不建议再细分目录。

service接收参数应该明确，查询操作参数建议分开（比如按条件搜索，不建议传递 request 这种方式），更新操作参数可以分开也可以用 数组或对象 形式传参。

#### 数据

非配置类型的数据，可以放到 **App\Datas** 目录下。

#### 身份验证

#### 事件对象

#### 监听/订阅者

#### 验证规则对象

#### 异常

#### 任务对象

#### 通知对象

#### 服务提供者



### 代码规范



### 身份验证



### 响应数据

应该使用正确的响应码，定义相关的业务码，

### 事务



### 日志



